(this["webpackJsonpmy-app-heroku"]=this["webpackJsonpmy-app-heroku"]||[]).push([[0],{110:function(e,t){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),c=a(9),l=a.n(c),i=(a(81),a(29)),s=a(35),m=a(67),u=a(64),d=a(65),h=a.n(d),E=r.a.createContext(),p={general:[{from:"BOT",msg:"Hello there"}],random:[{from:"BOT",msg:"Hello there"}]};function f(e,t){var a=t.payload,n=a.from,o=a.msg,r=a.topic;switch(console.log("state",e),t.type){case"RECIVE_MESSAGE":console.log("correct action",n,o,r);var c=Object(u.a)({},e,Object(s.a)({},r,[].concat(Object(m.a)(e[r]),[{from:n,msg:o}])));return console.log("new state",c),c;default:return console.log("default"),e}}function g(e){n.emit("chat message",e)}var v=function(e){var t=r.a.useReducer(f,p),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(o.useMemo)((function(){return"User"+Math.random(100).toFixed(2)}),[]),m=Object(o.useCallback)((function(e){return l({type:"RECIVE_MESSAGE",payload:e})}),[l]);return Object(o.useEffect)((function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT||":9290";console.log("port",e),(n=h()(e)).on("chat message",m)}),[]),r.a.createElement(E.Provider,{value:{state:c,sendChatAction:g,user:s}},e.children)},b=a(149),O=a(152),w=a(40),x=a(154),y=a(155),S=a(156),C=a(159),j=a(157),k=a(158),N=Object(b.a)((function(e){return{root:{padding:e.spacing(3,2),margin:"50px"},flex:{display:"flex",alignItems:"center"},topicsWindow:{width:"30%",height:"300px",borderRight:"1px solid gray"},chatWindow:{width:"70%",height:"300px",padding:"20px"},chatBox:{width:"85%"},button:{width:"15%"}}})),B=function(){var e=N(),t=r.a.useContext(E),a=t.state,n=t.sendChatAction,c=t.user,l=Object.keys(a),s=Object(o.useState)(l[0]),m=Object(i.a)(s,2),u=m[0],d=m[1],h=Object(o.useState)(""),p=Object(i.a)(h,2),f=p[0],g=p[1];return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,{elevation:3},r.a.createElement(w.a,{variant:"h2",gutterBottom:!0},"Chat app"),r.a.createElement(w.a,{variant:"h4",gutterBottom:!0},u),r.a.createElement("div",{className:e.flex},r.a.createElement("div",{className:e.topicsWindow},r.a.createElement(x.a,null,l.map((function(e){return r.a.createElement(y.a,{onClick:function(e){return d(e.target.innerText)},key:e,button:!0},r.a.createElement(S.a,{primary:e}))})))),r.a.createElement("div",{className:e.chatWindow},a[u].map((function(t,a){return r.a.createElement("div",{className:e.flex,key:a},r.a.createElement(C.a,{label:t.from}),r.a.createElement("div",null,r.a.createElement(w.a,{variant:"body1",gutterBottom:!0},t.msg)))})))),r.a.createElement("div",{className:e.flex},r.a.createElement(k.a,{label:"Send a chat",className:e.chatBox,value:f,onChange:function(e){return g(e.target.value)}}),r.a.createElement(j.a,{variant:"contained",color:"primary",className:e.button,onClick:function(){n({from:c,msg:f,topic:u}),g("")}},"Send"))))};a(116);var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null,r.a.createElement(B,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(117)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.c32c3ad7.chunk.js.map